<div class="toolbar">
  <div class="d-flex justify-content-end">
    <button class="btn btn-primary btn-round btn-icon" (click)="openModal(template)">
      <i class="fa fa-plus"></i>
    </button>
  </div>
</div>
<table id="datatable" class="table table-striped table-bordered" cellspacing="0" width="100%">
  <thead>
    <tr>
      <th>{{ dataTable.headerRow[0] }}</th>
      <th>{{ dataTable.headerRow[1] }}</th>
      <th>{{ dataTable.headerRow[2] }}</th>
      <th>{{ dataTable.headerRow[3] }}</th>
      <th>{{ dataTable.headerRow[4] }}</th>
      <th>{{ dataTable.headerRow[5] }}</th>
      <th class="disabled-sorting text-right">
        {{ dataTable.headerRow[6] }}
      </th>
    </tr>
    <tr *ngIf="isLoad">
      <td colspan="6" style="text-align: center">
        <div class="d-flex flex-column align-items-center">
          <div class="spinner-border spinner-border text-secondary" role="status">
            <span class="sr-only">Loading...</span>
          </div>
          <span class="mt-2">Carregando dados...</span>
        </div>
      </td>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let row of dataTable.dataRows">
      <td>{{ row[0] }}</td>
      <td>{{ row[1] }}</td>
      <td>{{ row[2] }}</td>
      <td>{{ row[3] }}</td>
      <td>{{ row[4] }}</td>
      <td>{{ row[5] }}</td>
      <!-- <td>
                      <span *ngIf="row[3]">
                          {{row[3] | mask: '000.000.000-00'}}
                      </span>
                      <span *ngIf="!row[3]" style="color: red;">
                          Is empty
                      </span>
                  </td>
                  <td>
                      <span *ngIf="row[4]">
                          {{row[4] | mask: '(00) 00000-0000'}}
                      </span>
                      <span *ngIf="!row[4]" style="color: red;">
                          Is empty
                      </span>
                      </td> -->
      <td class="text-right">
        <a href="javascript:void(0)" class="btn btn-danger btn-link btn-icon remove" style="font-size: 20px"
          (click)="onDelete(row)"><i class="fa fa-times"></i></a>
      </td>
    </tr>
  </tbody>
</table>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">
      <i class="fa fa-user" aria-hidden="true"></i> Novo Fornecedor
    </h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="mt-4 mb-4">
    <form [formGroup]="form">
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-4">
            <label>CNPJ:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="cnpj" placeholder="xx.xxx.xxx/xxxx-xx" formControlName="cnpj"
                mask="00.000.000/0000-00" required />
              <small *ngIf="
                      (formControl.nome.touched || submitted) &&
                      formControl.nome.errors?.required
                    " class="text-danger">
                CNPJ é obrigatório <i>*</i>
              </small>
            </div>
          </div>
          <div class="col-md-4">
            <label>Razão Social:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="razao" placeholder="" formControlName="razao" required />
              <small *ngIf="
                      (formControl.email.touched || submitted) &&
                      formControl.email.errors?.required
                    " class="text-danger">
                Razão Social é obrigatório <i>*</i>
              </small>
            </div>
          </div>
          <div class="col-md-4">
            <label>Nome Fantasia:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="fantasia" placeholder="" formControlName="fantasia"
                required />
              <small *ngIf="
                      (formControl.email.touched || submitted) &&
                      formControl.email.errors?.required
                    " class="text-danger">
                Nome Fantasia é obrigatório <i>*</i>
              </small>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <label>Logradouro:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="logradouro" placeholder="" formControlName="logradouro"
                required />
              <small *ngIf="
                      (formControl.nome.touched || submitted) &&
                      formControl.nome.errors?.required
                    " class="text-danger">
                Logradouro é obrigatório <i>*</i>
              </small>
            </div>
          </div>
          <div class="col-md-2">
            <label>Número:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="numero" placeholder="" formControlName="numero" required />
              <small *ngIf="
                      (formControl.nome.touched || submitted) &&
                      formControl.nome.errors?.required
                    " class="text-danger">
                Número é obrigatório <i>*</i>
              </small>
            </div>
          </div>
          <div class="col-md-6">
            <label>Complemento:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="complemento" placeholder="" formControlName="complemento"
                required />
              <small *ngIf="
                    (formControl.nome.touched || submitted) &&
                    formControl.nome.errors?.required
                  " class="text-danger">
                Complemento é obrigatório <i>*</i>
              </small>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <label>Bairro:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="bairro" placeholder="" formControlName="bairro" required />
              <small *ngIf="
                      (formControl.nome.touched || submitted) &&
                      formControl.nome.errors?.required
                    " class="text-danger">
                Bairro é obrigatório <i>*</i>
              </small>
            </div>
          </div>
          <div class="col-md-2">
            <label>CEP:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="cep" placeholder="" formControlName="cep" required />
              <small *ngIf="
                      (formControl.nome.touched || submitted) &&
                      formControl.nome.errors?.required
                    " class="text-danger">
                CEP é obrigatório <i>*</i>
              </small>
            </div>
          </div>
          <div class="col-md-4">
            <label>Cidade:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="cidade" placeholder="" formControlName="cidade" required />
              <small *ngIf="
                      (formControl.nome.touched || submitted) &&
                      formControl.nome.errors?.required
                    " class="text-danger">
                Cidade é obrigatório <i>*</i>
              </small>
            </div>
          </div>
          <div class="col-md-2">
            <label>UF:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="uf" placeholder="" formControlName="uf" required />
              <small *ngIf="
                      (formControl.nome.touched || submitted) &&
                      formControl.nome.errors?.required
                    " class="text-danger">
                UF é obrigatório <i>*</i>
              </small>
            </div>
          </div>
        </div>
        <div class="row">
          <!-- <div class="col-md-6">
                <label>Empresa:</label>
                <div class="form-group">
                  <input
                    type="text"
                    class="form-control"
                    id="empresa"
                    placeholder=""
                    formControlName="empresa"
                    required
                  />
                  <small
                    *ngIf="
                      (formControl.cpf.touched || submitted) &&
                      formControl.cpf.errors?.required
                    "
                    class="text-danger"
                  >
                    Empresa é obrigatório <i>*</i>
                  </small>
                </div>
              </div> -->
          <div class="col-md-4">
            <!-- <label>País:</label>
                <div class="form-group">
                  <div class="form-group">
                    <ng-select [items]="paises" bindLabel="nome" class="custom"
                        bindValue="id" appendTo="body" formControlName="pais"
                        placeholder="Selecione País"></ng-select>
                </div>
                <small
                    *ngIf="(formControl.pais.touched || submitted) && formControl.pais.errors?.required"
                    class="text-danger">
                    País é obrigatório <i>*</i>
                </small>
                </div> -->
          </div>
          <div class="col-md-4">
            <label>Tip de Vínculo:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="vinculo" placeholder="" formControlName="vinculo" required />
              <small *ngIf="
                      (formControl.cpf.touched || submitted) &&
                      formControl.cpf.errors?.required
                    " class="text-danger">
                Tipo do vículo é obrigatório <i>*</i>
              </small>
            </div>
          </div>
          <div class="col-md-4">
            <label>Código Interno:</label>
            <div class="form-group">
              <input type="text" class="form-control" id="codigoInterno" placeholder="" formControlName="codigoInterno"
                required />
              <small *ngIf="
                      (formControl.telefone.touched || submitted) &&
                      formControl.telefone.errors?.required
                    " class="text-danger">
                Código interno é obrigatório <i>*</i>
              </small>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-right mt-2">
            <button type="submit" class="btn btn-primary" (click)="onSaveNewUser()">
              <div *ngIf="isLoadSave" class="spinner-border spinner-border-sm text-light" role="status">
                <span class="sr-only">Loading...</span>
              </div>
              <span *ngIf="!isLoadSave">Salvar</span>
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</ng-template>